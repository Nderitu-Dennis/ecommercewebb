{"ast":null,"code":"import { PlaceOrderComponent } from '../place-order/place-order.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/customer.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/icon\";\nconst _c0 = function (a0) {\n  return {\n    \"highlight\": a0\n  };\n};\nfunction CartComponent_div_0_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9)(2, \"div\", 10);\n    i0.ɵɵelement(3, \"img\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 12)(5, \"div\", 13)(6, \"div\", 14);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 15);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 16)(12, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_0_div_2_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const item_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.decreaseQuantity(item_r6.productId));\n    });\n    i0.ɵɵelementStart(13, \"mat-icon\");\n    i0.ɵɵtext(14, \"remove_circle_outline\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"span\", 18);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_0_div_2_Template_button_click_17_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const item_r6 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.increaseQuantity(item_r6.productId));\n    });\n    i0.ɵɵelementStart(18, \"mat-icon\");\n    i0.ɵɵtext(19, \"add_circle_outline\");\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    const item_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", item_r6.processedImg, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(8, _c0, item_r6.highlighted));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r6.productName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(10, 6, item_r6.price), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", item_r6.quantity == 1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(item_r6.quantity);\n  }\n}\nfunction CartComponent_div_0_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Coupon Applied: \", ctx_r4.order.couponName, \" \");\n  }\n}\nfunction CartComponent_div_0_div_13_mat_error_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" This input is required! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CartComponent_div_0_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"form\", 21);\n    i0.ɵɵlistener(\"ngSubmit\", function CartComponent_div_0_div_13_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.applyCoupon());\n    });\n    i0.ɵɵelementStart(2, \"mat-form-field\", 22)(3, \"mat-label\");\n    i0.ɵɵtext(4, \"Code\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"input\", 23);\n    i0.ɵɵtemplate(6, CartComponent_div_0_div_13_mat_error_6_Template, 2, 0, \"mat-error\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 25);\n    i0.ɵɵtext(8, \" Apply Coupon> \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r5.couponForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r5.couponForm.get(\"code\")) == null ? null : tmp_1_0.hasError(\"required\"));\n  }\n}\nfunction CartComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 2);\n    i0.ɵɵtemplate(2, CartComponent_div_0_div_2_Template, 20, 10, \"div\", 3);\n    i0.ɵɵelementStart(3, \"div\", 4);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 4);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, CartComponent_div_0_div_9_Template, 2, 1, \"div\", 5);\n    i0.ɵɵelementStart(10, \"div\")(11, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_0_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.placeOrder());\n    });\n    i0.ɵɵtext(12, \" Place Order\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(13, CartComponent_div_0_div_13_Template, 9, 2, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.cartItems);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Total Amount: \", i0.ɵɵpipeBind1(5, 5, ctx_r0.order.totalAmount), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Amount: \", i0.ɵɵpipeBind1(8, 7, ctx_r0.order.amount), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.order.couponName != null);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.order.couponName == null);\n  }\n}\nfunction CartComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"mat-icon\", 27);\n    i0.ɵɵtext(2, \"remove_shopping_cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"Nothing to see here for now!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class CartComponent {\n  constructor(customerService, snackbar, fb, dialog) {\n    this.customerService = customerService;\n    this.snackbar = snackbar;\n    this.fb = fb;\n    this.dialog = dialog;\n    this.cartItems = []; //variable to store cart items\n  }\n\n  ngOnInit() {\n    this.getCart();\n  }\n  applyCoupon() {\n    this.customerService.applyCoupon(this.couponForm.get(['code']).value).subscribe(res => {\n      this.snackbar.open(\"Coupon applied successfully!\", 'Close', {\n        duration: 5000\n      });\n      this.getCart(); //call this method to refresh the page data\n    }, error => {\n      this.snackbar.open(error.error, 'close', {\n        duration: 5000\n      });\n    });\n  }\n  getCart() {\n    this.cartItems = [];\n    this.customerService.getCartByUserId().subscribe(res => {\n      this.order = res;\n      res.cartItems.forEach(element => {\n        element.processedImg = 'data:image/jpeg;base64,' + element.returnedImg;\n        this.cartItems.push(element);\n      });\n    }, error => {\n      console.error('Error fetching cart:', error);\n      // Add any additional error handling logic here\n    });\n  }\n\n  increaseQuantity(productId) {\n    this.customerService.increaseProductQuantity(productId).subscribe(res => {\n      this.snackbar.open('Product quantity increased!', 'Close', {\n        duration: 5000\n      });\n      this.getCart(); //updating cart details\n    });\n  }\n\n  decreaseQuantity(productId) {\n    this.customerService.decreaseProductQuantity(productId).subscribe(res => {\n      this.snackbar.open('Product quantity decreased!', 'Close', {\n        duration: 5000\n      });\n      this.getCart(); //updating cart details\n    });\n  }\n\n  placeOrder() {\n    this.dialog.open(PlaceOrderComponent);\n  }\n  static #_ = this.ɵfac = function CartComponent_Factory(t) {\n    return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.CustomerService), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.MatDialog));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CartComponent,\n    selectors: [[\"app-cart\"]],\n    decls: 3,\n    vars: 2,\n    consts: [[4, \"ngIf\", \"ngIfElse\"], [\"emptyCart\", \"\"], [1, \"cart-container\"], [\"class\", \"cart-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"total-price\"], [\"class\", \"total-price\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"class\", \"container\", 4, \"ngIf\"], [1, \"cart-item\"], [1, \"product-info\"], [1, \"product-image\"], [\"alt\", \"product-image\", 3, \"src\"], [1, \"product-details\"], [1, \"item-row\"], [1, \"item-name\", 3, \"ngClass\"], [1, \"item-price\"], [1, \"quantity-controls\"], [\"mat-icon-button\", \"\", 3, \"disabled\", \"click\"], [1, \"quantity\"], [\"mat-icon-button\", \"\", 3, \"click\"], [1, \"container\"], [3, \"formGroup\", \"ngSubmit\"], [\"appearance\", \"outline\", 1, \"form-field\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Code\", \"formControlName\", \"code\"], [4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\"], [1, \"empty-cart\"], [1, \"icon\"]],\n    template: function CartComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, CartComponent_div_0_Template, 14, 9, \"div\", 0);\n        i0.ɵɵtemplate(1, CartComponent_ng_template_1_Template, 5, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.cartItems.length > 0)(\"ngIfElse\", _r1);\n      }\n    },\n    dependencies: [i5.NgClass, i5.NgForOf, i5.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName, i6.MatButton, i6.MatIconButton, i7.MatFormField, i7.MatLabel, i7.MatError, i8.MatInput, i9.MatIcon, i5.CurrencyPipe],\n    styles: [\".cart-container[_ngcontent-%COMP%] {\\n  max-width: 600px;\\n  margin: 0 auto;\\n  padding: 16px;\\n  border: 1px solid #ccc;\\n  border-radius: 8px;\\n  font-family: Arial, sans-serif;\\n}\\n\\n.cart-item[_ngcontent-%COMP%] {\\n  padding: 8px 0;\\n  border-bottom: 1px solid #ccc;\\n}\\n\\n.product-info[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.product-image[_ngcontent-%COMP%] {\\n  width: 120px;\\n  height: 120px;\\n  border-radius: 8px;\\n  overflow: hidden;\\n  margin-right: 16px;\\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\\n}\\n\\n.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: auto;\\n}\\n\\n.item-row[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  margin-bottom: 8px;\\n}\\n\\n.item-name[_ngcontent-%COMP%] {\\n  flex: 2;\\n  font-weight: bold;\\n  color: #2196f3;\\n}\\n\\n.item-price[_ngcontent-%COMP%] {\\n  flex: 1;\\n  margin-left: 16px;\\n}\\n\\n.quantity-controls[_ngcontent-%COMP%] {\\n  flex: 1;\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-end;\\n}\\n\\n.quantity[_ngcontent-%COMP%] {\\n  margin: 0 8px;\\n}\\n\\n.total-price[_ngcontent-%COMP%] {\\n  text-align: right;\\n  font-weight: bold;\\n  margin-top: 16px;\\n  color: #ff4081;\\n}\\n\\nbutton.mat-raised-button[_ngcontent-%COMP%] {\\n  display: block;\\n  width: 100%;\\n  max-width: 200px;\\n  margin: 16px auto 0;\\n  padding: 12 px 20px;\\n  border-radius: 8px;\\n  font-size: 16px;\\n  cursor: pointer;\\n  transition: background-color 0.3s ease;\\n}\\n\\nbutton.mat-raised-button[_ngcontent-%COMP%]:hover {\\n  background-color: #1976d2;\\n}\\n\\nbutton.mat-raised-button[_ngcontent-%COMP%]:focus {\\n  outline: none;\\n}\\n\\n.empty-cart[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  height: 300px;\\n}\\n.empty-cart[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  color: #616161;\\n  margin-top: 10px;\\n}\\n\\nform[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n}\\nform[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] {\\n  margin-bottom: 20px;\\n}\\nform[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%] {\\n  border-radius: 4px;\\n  border: 1px solid #ccc;\\n}\\nform[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%] {\\n  border-width: 1px;\\n}\\nform[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%] {\\n  color: #3f51b5;\\n}\\nform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  align-self: center;\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  max-width: 600px;\\n  margin: 0 auto;\\n  padding: 20px;\\n}\\n\\n@media (max-width: 600px) {\\n  .container[_ngcontent-%COMP%] {\\n    padding: 10px;\\n  }\\n  .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] {\\n    margin-bottom: 10px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY3VzdG9tZXIvY29tcG9uZW50cy9jYXJ0L2NhcnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsc0JBQUE7QUFFQTtFQUNJLGdCQUFBO0VBQ0EsY0FBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EsOEJBQUE7QUFBSjs7QUFHQTtFQUNJLGNBQUE7RUFDQSw2QkFBQTtBQUFKOztBQUdBO0VBQ0ksYUFBQTtFQUNBLG1CQUFBO0FBQUo7O0FBR0E7RUFDSSxZQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLHNDQUFBO0FBQUo7O0FBSUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtBQURKOztBQUtBO0VBQ0ksYUFBQTtFQUNBLG1CQUFBO0VBQ0EsOEJBQUE7RUFDQSxrQkFBQTtBQUZKOztBQUtBO0VBQ0ksT0FBQTtFQUNBLGlCQUFBO0VBQ0EsY0FBQTtBQUZKOztBQU1BO0VBQ0ksT0FBQTtFQUNBLGlCQUFBO0FBSEo7O0FBTUE7RUFDSSxPQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EseUJBQUE7QUFISjs7QUFNQTtFQUNJLGFBQUE7QUFISjs7QUFNQTtFQUNJLGlCQUFBO0VBQ0EsaUJBQUE7RUFDQSxnQkFBQTtFQUNBLGNBQUE7QUFISjs7QUFNQTtFQUNJLGNBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtFQUNBLHNDQUFBO0FBSEo7O0FBTUE7RUFDSSx5QkFBQTtBQUhKOztBQU1BO0VBQ0ksYUFBQTtBQUhKOztBQU9BO0VBQ0ksYUFBQTtFQUNBLHNCQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtFQUNBLGFBQUE7QUFKSjtBQU1JO0VBQ0ksZUFBQTtFQUNBLGNBQUE7RUFDQSxnQkFBQTtBQUpSOztBQVFBO0VBQ0ksYUFBQTtFQUNBLHNCQUFBO0FBTEo7QUFPSTtFQUNJLG1CQUFBO0FBTFI7QUFPUTtFQUNJLGtCQUFBO0VBQ0Esc0JBQUE7QUFMWjtBQVFRO0VBQ0ksaUJBQUE7QUFOWjtBQVNRO0VBQ0ksY0FBQTtBQVBaO0FBWUk7RUFDSSxrQkFBQTtBQVZSOztBQWNBO0VBQ0ksZ0JBQUE7RUFDQSxjQUFBO0VBQ0EsYUFBQTtBQVhKOztBQWNBO0VBQ0k7SUFDSSxhQUFBO0VBWE47RUFjVTtJQUNJLG1CQUFBO0VBWmQ7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qY2FydC5jb21wb25lbnQuc2NzcyovXG5cbi5jYXJ0LWNvbnRhaW5lciB7XG4gICAgbWF4LXdpZHRoOiA2MDBweDtcbiAgICBtYXJnaW46IDAgYXV0bztcbiAgICBwYWRkaW5nOiAxNnB4O1xuICAgIGJvcmRlcjoxcHggc29saWQgI2NjYztcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1xufVxuXG4uY2FydC1pdGVtIHtcbiAgICBwYWRkaW5nOiA4cHggMDtcbiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2NjYztcbn1cblxuLnByb2R1Y3QtaW5mbyB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4ucHJvZHVjdC1pbWFnZXtcbiAgICB3aWR0aDogMTIwcHg7XG4gICAgaGVpZ2h0OiAxMjBweDtcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7XG4gICAgYm94LXNoYWRvdzogMCAwIDVweCByZ2JhKDAsIDAgLCAwLCAwLjEpO1xuXG59XG5cbi5wcm9kdWN0LWltYWdlIGltZ3tcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IGF1dG87XG4gICBcbn1cblxuLml0ZW0tcm93e1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4O1xufVxuXG4uaXRlbS1uYW1le1xuICAgIGZsZXg6IDI7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgY29sb3I6ICMyMTk2ZjM7XG5cbn1cblxuLml0ZW0tcHJpY2Uge1xuICAgIGZsZXg6MTtcbiAgICBtYXJnaW4tbGVmdDogMTZweDtcbn1cblxuLnF1YW50aXR5LWNvbnRyb2xzIHtcbiAgICBmbGV4OiAxO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xufVxuXG4ucXVhbnRpdHkge1xuICAgIG1hcmdpbjogMCA4cHg7XG59XG5cbi50b3RhbC1wcmljZSB7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICBjb2xvcjojZmY0MDgxO1xufVxuXG5idXR0b24ubWF0LXJhaXNlZC1idXR0b257XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgbWF4LXdpZHRoOiAyMDBweDtcbiAgICBtYXJnaW46IDE2cHggYXV0byAwO1xuICAgIHBhZGRpbmc6IDEyIHB4IDIwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2U7XG59XG5cbmJ1dHRvbi5tYXQtcmFpc2VkLWJ1dHRvbjpob3ZlcntcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTk3NmQyO1xufVxuXG5idXR0b24ubWF0LXJhaXNlZC1idXR0b246Zm9jdXMge1xuICAgIG91dGxpbmU6IG5vbmU7XG5cbn1cblxuLmVtcHR5LWNhcnR7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgaGVpZ2h0OiAzMDBweDtcblxuICAgIHNwYW57XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgICAgY29sb3I6ICM2MTYxNjE7XG4gICAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgfVxufVxuXG5mb3Jte1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblxuICAgIG1hdC1mb3JtLWZpZWxke1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuXG4gICAgICAgIC5tYXQtZm9ybS1maWVsZC13cmFwcGVye1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICAgICAgfVxuXG4gICAgICAgIC5tYXQtZm9ybS1maWVsZC1vdXRsaW5le1xuICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiAxcHg7XG4gICAgICAgIH1cblxuICAgICAgICAubWF0LWlucHV0LWVsZW1lbnR7XG4gICAgICAgICAgICBjb2xvcjojM2Y1MWI1O1xuICAgICAgICB9XG5cbiAgICAgICAgXG4gICAgfVxuICAgIGJ1dHRvbntcbiAgICAgICAgYWxpZ24tc2VsZjogY2VudGVyO1xuICAgIH1cbn1cblxuLmNvbnRhaW5lcntcbiAgICBtYXgtd2lkdGg6IDYwMHB4O1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIHBhZGRpbmc6IDIwcHg7XG59XG5cbkBtZWRpYShtYXgtd2lkdGg6IDYwMHB4KXtcbiAgICAuY29udGFpbmVye1xuICAgICAgICBwYWRkaW5nOiAxMHB4O1xuXG4gICAgICAgIGZvcm17XG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["PlaceOrderComponent","i0","CartComponent","constructor","customerService","snackbar","fb","dialog","ngOnInit","getCart","applyCoupon","couponForm","get","value","subscribe","res","open","duration","error","cartItems","getCartByUserId","order","forEach","element","processedImg","returnedImg","push","console","increaseQuantity","productId","increaseProductQuantity","decreaseQuantity","decreaseProductQuantity","placeOrder","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/denniskali/Desktop/ecommercewebb/src/app/customer/components/cart/cart.component.ts","/home/denniskali/Desktop/ecommercewebb/src/app/customer/components/cart/cart.component.html"],"sourcesContent":["\nimport { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { CustomerService } from '../../services/customer.service';\nimport { PlaceOrderComponent } from '../place-order/place-order.component';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.scss']\n})\nexport class CartComponent {\n\ncartItems: any[] = []; //variable to store cart items\norder: any;  //variable to store order details\n\ncouponForm!: FormGroup;\n\nconstructor(private customerService:CustomerService,\n  private snackbar : MatSnackBar,\n  private fb : FormBuilder,\n  public dialog: MatDialog,){}\n\nngOnInit(): void {  \n  this.getCart();\n}\n\napplyCoupon(){\n  this.customerService.applyCoupon(this.couponForm.get(['code'])!.value).subscribe(res =>{\n      this.snackbar.open(\"Coupon applied successfully!\", 'Close',{\n        duration: 5000\n      });\n\n      this.getCart(); //call this method to refresh the page data\n  }, error =>{\n    this.snackbar.open(error.error, 'close',{\n      duration:5000\n    });\n  })\n}\n\n\n  getCart() {\n    this.cartItems = [];\n    this.customerService.getCartByUserId().subscribe(\n      res => {\n        this.order = res;\n        res.cartItems.forEach(element => {\n          element.processedImg = 'data:image/jpeg;base64,' + element.returnedImg;\n          this.cartItems.push(element);\n        });\n      },\n      error => {\n        console.error('Error fetching cart:', error);\n        // Add any additional error handling logic here\n      }\n    );\n  }\n\n  \n\n  increaseQuantity(productId: any){\n    this.customerService.increaseProductQuantity(productId).subscribe(res =>{\n      this.snackbar.open('Product quantity increased!','Close',{duration:5000});\n      this.getCart(); //updating cart details\n    })\n  }\n\n  decreaseQuantity(productId: any){\n    this.customerService.decreaseProductQuantity(productId).subscribe(res =>{\n      this.snackbar.open('Product quantity decreased!','Close',{duration:5000});\n      this.getCart(); //updating cart details\n    })\n  }\n\n  placeOrder(){\n    this.dialog.open(PlaceOrderComponent);\n  }\n\n}\n\n","<div *ngIf=\"cartItems.length > 0; else emptyCart\">\n    <!--only show cart if items are >0-->\n    <div class=\"cart-container\">\n        <div class=\"cart-item\" *ngFor=\"let item of cartItems\">\n            <div class=\"product-info\">\n                <div class=\"product-image\">\n                    <img [src]=\"item.processedImg\" alt=\"product-image\" />\n                </div>\n                <div class=\"product-details\">\n                    <div class=\"item-row\">\n                        <div class=\"item-name\" [ngClass]=\"{ 'highlight' : item.highlighted}\">\n                            {{item.productName}}\n\n                        </div>\n                        <div class=\"item-price\">\n                            {{item.price | currency}}\n                        </div>\n                        <div class=\"quantity-controls\">\n\n                            <button mat-icon-button [disabled]=\"item.quantity ==1\" (click)=\"decreaseQuantity(item.productId)\">\n                                <mat-icon>remove_circle_outline</mat-icon>\n                            </button>\n\n                            <span class=\"quantity\">{{ item.quantity }}</span>\n\n                            <button mat-icon-button (click)=\"increaseQuantity(item.productId)\">\n                                <mat-icon>add_circle_outline</mat-icon>\n                            </button>\n\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <!--section to show details of the order-->\n        <div class=\"total-price\">\n            Total Amount: {{ order.totalAmount | currency}}\n        </div>\n        <div class=\"total-price\">\n            Amount: {{ order.amount | currency }}\n        </div>\n\n        <!--showing the name of the applied coupon-->\n        <div class=\"total-price\" *ngIf=\"order.couponName != null\">\n            Coupon Applied: {{ order.couponName }}\n        </div>\n        <div>\n            <button mat-raised-button color=\"primary\" (click)=\"placeOrder()\"> Place Order</button>\n         \n        </div>\n    </div>\n\n    <div class=\"container\" *ngIf=\"order.couponName ==null\">\n        <form [formGroup]=\"couponForm\" (ngSubmit)=\"applyCoupon()\">\n            <mat-form-field appearance=\"outline\" class=\"form-field\">\n                <mat-label>Code</mat-label>\n                <input matInput type=\"text\" placeholder=\"Code\" formControlName=\"code\">\n                <mat-error *ngIf=\"couponForm.get('code')?.hasError('required')\">\n                This input is required!\n            </mat-error>\n            </mat-form-field>\n\n            <button mat-raised-button color=\"primary\" type=\"submit\">\n                Apply Coupon>  </button>\n                \n                </form>      \n\n    </div>\n</div>\n\n<ng-template #emptyCart>\n    <div class=\"empty-cart\">\n        <mat-icon class=\"icon\">remove_shopping_cart</mat-icon>\n            <span>Nothing to see here for now!</span>\n        \n    </div>\n\n</ng-template>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}