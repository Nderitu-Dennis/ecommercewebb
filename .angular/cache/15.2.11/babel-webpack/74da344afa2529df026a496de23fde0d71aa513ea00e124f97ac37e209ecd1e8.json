{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { UserstorageService } from 'src/app/services/auth/storage/userstorage.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"../../services/customer.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/form-field\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/select\";\nimport * as i10 from \"@angular/material/core\";\nimport * as i11 from \"@angular/material/icon\";\nfunction ReviewOrderedProductComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 16);\n    i0.ɵɵelement(2, \"img\", 17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r0.imagePreview, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction ReviewOrderedProductComponent_mat_error_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Select a rating! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ReviewOrderedProductComponent_mat_error_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" This input is required!\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class ReviewOrderedProductComponent {\n  constructor(fb, snackBar, customerService, router, activatedRoute) {\n    this.fb = fb;\n    this.snackBar = snackBar;\n    this.customerService = customerService;\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.productId = this.activatedRoute.snapshot.params['productId'];\n  }\n  ngOnInit() {\n    this.reviewForm = this.fb.group({\n      rating: [null, [Validators.required]],\n      description: [null, [Validators.required]]\n    });\n  }\n  //method to be called when user selects new image\n  onFileSelected(event) {\n    this.selectedFile = event.target.files[0];\n    this.previewImage();\n  }\n  previewImage() {\n    const reader = new FileReader();\n    reader.onload = () => {\n      this.imagePreview = reader.result;\n    };\n    reader.readAsDataURL(this.selectedFile);\n  }\n  submitForm() {\n    const formData = new FormData();\n    formData.append('img', this.selectedFile);\n    formData.append('productId', this.productId.toString());\n    formData.append('userId', UserstorageService.getUserId().toString());\n    formData.append('rating', this.reviewForm.get('rating').value);\n    formData.append('description', this.reviewForm.get('description').value);\n    this.customerService.giveReview(formData).subscribe(res => {\n      if (res.id != null) {\n        this.snackBar.open(\"Review posted successfully\", 'Close', {\n          duration: 5000\n        });\n        this.router.navigateByUrl('/customer/my_orders');\n      } else {\n        this.snackBar.open(\"SOMETHING WENT WRONG!\", 'ERROR', {\n          duration: 5000\n        });\n      }\n    });\n  }\n  static #_ = this.ɵfac = function ReviewOrderedProductComponent_Factory(t) {\n    return new (t || ReviewOrderedProductComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.CustomerService), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i4.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ReviewOrderedProductComponent,\n    selectors: [[\"app-review-ordered-product\"]],\n    decls: 31,\n    vars: 4,\n    consts: [[1, \"review-Form\", 3, \"formGroup\"], [1, \"file-upload-container\"], [1, \"file-upload-label\"], [\"type\", \"file\", \"id\", \"fileInput\", \"hidden\", \"\", 3, \"change\"], [\"class\", \"image-preview\", 4, \"ngIf\"], [\"appearance\", \"outline\"], [\"formControlName\", \"rating\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"value\", \"3\"], [\"value\", \"4\"], [\"value\", \"5\"], [4, \"ngIf\"], [\"matInput\", \"\", \"formControlName\", \"description\", \"placeholder\", \"Description\", \"rows\", \"5\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", 3, \"click\"], [1, \"image-preview\"], [1, \"circle-image\"], [\"alt\", \"Selected Image\", 1, \"preview-image\", 3, \"src\"]],\n    template: function ReviewOrderedProductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0)(1, \"div\", 1)(2, \"label\", 2)(3, \"span\");\n        i0.ɵɵtext(4, \"select a File\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"input\", 3);\n        i0.ɵɵlistener(\"change\", function ReviewOrderedProductComponent_Template_input_change_5_listener($event) {\n          return ctx.onFileSelected($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"mat-icon\");\n        i0.ɵɵtext(7, \"attach_file\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(8, ReviewOrderedProductComponent_div_8_Template, 3, 1, \"div\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"mat-form-field\", 5)(10, \"mat-label\");\n        i0.ɵɵtext(11, \"Rating\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"mat-select\", 6)(13, \"mat-option\", 7);\n        i0.ɵɵtext(14, \"1 star\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"mat-option\", 8);\n        i0.ɵɵtext(16, \"2 stars\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"mat-option\", 9);\n        i0.ɵɵtext(18, \"3 stars\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"mat-option\", 10);\n        i0.ɵɵtext(20, \"4 stars\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"mat-option\", 11);\n        i0.ɵɵtext(22, \"5 stars\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(23, ReviewOrderedProductComponent_mat_error_23_Template, 2, 0, \"mat-error\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"mat-form-field\", 5)(25, \"mat-label\");\n        i0.ɵɵtext(26, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"textarea\", 13);\n        i0.ɵɵtemplate(28, ReviewOrderedProductComponent_mat_error_28_Template, 2, 0, \"mat-error\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function ReviewOrderedProductComponent_Template_button_click_29_listener() {\n          return ctx.submitForm();\n        });\n        i0.ɵɵtext(30, \" Submit \");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.reviewForm);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectedFile);\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"ngIf\", ctx.reviewForm.get(\"rating\").invalid && ctx.reviewForm.get(\"rating\").touched);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.reviewForm.get(\"description\").invalid && ctx.reviewForm.get(\"description\").touched);\n      }\n    },\n    dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i6.MatButton, i7.MatFormField, i7.MatLabel, i7.MatError, i8.MatInput, i9.MatSelect, i10.MatOption, i11.MatIcon],\n    styles: [\".review-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  max-width: 400px;\\n  margin: 0 auto;\\n  padding: 20px;\\n  border: 1px solid #ddd;\\n  border-radius: 5px;\\n  background-color: #f8f8f8;\\n  margin-top: 45px;\\n}\\n.review-form[_ngcontent-%COMP%]   .file-upload-container[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 20px;\\n}\\n.review-form[_ngcontent-%COMP%]   .file-upload-container[_ngcontent-%COMP%]   .file-upload-label[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  padding: 12px 24px;\\n  background-color: #007bff;\\n  color: white;\\n  border-radius: 4px;\\n  transition: background-color 0.3s;\\n}\\n.review-form[_ngcontent-%COMP%]   .file-upload-container[_ngcontent-%COMP%]   .file-upload-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  margin-right: 8px;\\n}\\n.review-form[_ngcontent-%COMP%]   .file-upload-container[_ngcontent-%COMP%]   .file-upload-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n}\\n.review-form[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  margin-top: 16px;\\n}\\n.review-form[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .circle-image[_ngcontent-%COMP%] {\\n  width: 150px;\\n  height: 150px;\\n  border-radius: 100%;\\n  overflow: hidden;\\n  position: relative;\\n  background-color: lightgray;\\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n}\\n.review-form[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   .circle-image[_ngcontent-%COMP%]   .preview-image[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n}\\n.review-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%] {\\n  width: 100%;\\n  margin-top: 20px;\\n}\\n.review-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n}\\n.review-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%], .review-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n  width: 100%;\\n  font-size: 16px;\\n}\\n.review-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%] {\\n  width: 100%;\\n  font-size: 18px;\\n  margin-top: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY3VzdG9tZXIvY29tcG9uZW50cy9yZXZpZXctb3JkZXJlZC1wcm9kdWN0L3Jldmlldy1vcmRlcmVkLXByb2R1Y3QuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0EsY0FBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7RUFDQSxnQkFBQTtBQUNKO0FBQ0k7RUFDSSxrQkFBQTtFQUNBLG1CQUFBO0FBQ1I7QUFDUTtFQUNJLGVBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQ0FBQTtBQUNaO0FBQ1k7RUFDSSxpQkFBQTtBQUNoQjtBQUVZO0VBQ0ksZUFBQTtBQUFoQjtBQUtJO0VBQ0ksYUFBQTtFQUNBLHVCQUFBO0VBQ0EsZ0JBQUE7QUFIUjtBQUtRO0VBQ0ksWUFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0Esa0JBQUE7RUFDQSwyQkFBQTtFQUNBLHdDQUFBO0FBSFo7QUFLWTtFQUNJLFdBQUE7RUFDQSxZQUFBO0VBQ0EsaUJBQUE7QUFIaEI7QUFRSTtFQUNJLFdBQUE7RUFDQSxnQkFBQTtBQU5SO0FBUVE7RUFDSSxlQUFBO0FBTlo7QUFVUTtFQUNJLFdBQUE7RUFDQSxlQUFBO0FBUlo7QUFZSTtFQUNJLFdBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7QUFWUiIsInNvdXJjZXNDb250ZW50IjpbIi5yZXZpZXctZm9ybXtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBtYXgtd2lkdGg6IDQwMHB4O1xuICAgIG1hcmdpbjogMCBhdXRvO1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODtcbiAgICBtYXJnaW4tdG9wOiA0NXB4O1xuXG4gICAgLmZpbGUtdXBsb2FkLWNvbnRhaW5lcntcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuXG4gICAgICAgIC5maWxlLXVwbG9hZC1sYWJlbHtcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4IDI0cHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmO1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzO1xuXG4gICAgICAgICAgICBzcGFue1xuICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogOHB4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtYXQtaWNvbntcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAuaW1hZ2UtcHJldmlld3tcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIG1hcmdpbi10b3A6IDE2cHg7XG5cbiAgICAgICAgLmNpcmNsZS1pbWFnZXtcbiAgICAgICAgICAgIHdpZHRoOiAxNTBweDtcbiAgICAgICAgICAgIGhlaWdodDogMTUwcHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JheTtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMik7XG5cbiAgICAgICAgICAgIC5wcmV2aWV3LWltYWdle1xuICAgICAgICAgICAgICAgIHdpZHRoOjEwMCU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIG9iamVjdC1maXQ6Y292ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBtYXQtZm9ybS1maWVsZHtcbiAgICAgICAgd2lkdGg6MTAwJTtcbiAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcblxuICAgICAgICBtYXQtbGFiZWx7XG4gICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIG1hdC1zZWxlY3QsdGV4dGFyZWF7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGJ1dHRvblt0eXBlPVwic3VibWl0XCJde1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgZm9udC1zaXplOjE4cHg7XG4gICAgICAgIG1hcmdpbi10b3A6MjBweDtcblxuICAgIH1cbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["Validators","UserstorageService","i0","ReviewOrderedProductComponent","constructor","fb","snackBar","customerService","router","activatedRoute","snapshot","params","ngOnInit","reviewForm","group","rating","required","description","onFileSelected","event","selectedFile","target","files","previewImage","reader","FileReader","onload","imagePreview","result","readAsDataURL","submitForm","formData","FormData","append","productId","toString","getUserId","get","value","giveReview","subscribe","res","id","open","duration","navigateByUrl","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/denniskali/Desktop/ecommercewebb/src/app/customer/components/review-ordered-product/review-ordered-product.component.ts","/home/denniskali/Desktop/ecommercewebb/src/app/customer/components/review-ordered-product/review-ordered-product.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { CustomerService } from '../../services/customer.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { UserstorageService } from 'src/app/services/auth/storage/userstorage.service';\n\n@Component({\n  selector: 'app-review-ordered-product',\n  templateUrl: './review-ordered-product.component.html',\n  styleUrls: ['./review-ordered-product.component.scss']\n})\nexport class ReviewOrderedProductComponent {\n\n  productId:number = this.activatedRoute.snapshot.params['productId'];\n  reviewForm!: FormGroup;\n  selectedFile: File | null;\n  imagePreview: string | ArrayBuffer | null;\n\n\n  constructor(private fb: FormBuilder,\n    private snackBar: MatSnackBar,\n    private customerService:CustomerService,\n    private router: Router,\n    private activatedRoute: ActivatedRoute){\n\n    }\n\n    ngOnInit(){\n      this.reviewForm= this.fb.group({\n        rating: [null, [Validators.required]],\n        description: [null, [Validators.required]],\n      })\n\n    }\n\n    //method to be called when user selects new image\n    onFileSelected(event:any){\n      this.selectedFile = event.target.files[0];\n      this.previewImage();\n    }\n\n    previewImage(){\n      const reader=new FileReader();\n      reader.onload= () =>{\n        this.imagePreview = reader.result;\n      }\n      reader.readAsDataURL(this.selectedFile);\n    }\n\n    submitForm(){\n      const formData: FormData = new FormData();\n      formData.append('img', this.selectedFile)\n      formData.append('productId',this.productId.toString());\n      formData.append('userId',UserstorageService.getUserId().toString());\n      formData.append('rating',this.reviewForm.get('rating').value);\n      formData.append('description',this.reviewForm.get('description').value);\n\n      this.customerService.giveReview(formData).subscribe(res =>{\n        if(res.id !=null){\n          this.snackBar.open(\"Review posted successfully\", 'Close',{\n            duration: 5000\n          });\n          this.router.navigateByUrl('/customer/my_orders');\n        }\n        else{\n          this.snackBar.open(\"SOMETHING WENT WRONG!\",'ERROR',{\n            duration: 5000\n          });\n        }\n\n      })\n\n    }\n\n    \n\n}\n","<form [formGroup]=\"reviewForm\" class=\"review-Form\">\n\n    <div class=\"file-upload-container\">\n        <label class=\"file-upload-label\">\n            <span>select a File</span>\n            <input type=\"file\" id=\"fileInput\" (change)=\"onFileSelected($event)\" hidden>\n            <mat-icon>attach_file</mat-icon>\n        </label>\n\n        <div *ngIf=\"selectedFile\" class=\"image-preview\"> <!--this div is only shown when there is sth in the selected file-->\n            <div class=\"circle-image\">\n                <img [src]=\"imagePreview\" alt=\"Selected Image\" class=\"preview-image\">\n            </div>\n        </div>\n    </div>\n\n    <mat-form-field appearance=\"outline\">\n        <mat-label>Rating</mat-label>\n        <mat-select formControlName=\"rating\"> <!--replace 1 stars with html symbol for **-->\n            <mat-option value=\"1\">1 star</mat-option>\n            <mat-option value=\"2\">2 stars</mat-option>\n            <mat-option value=\"3\">3 stars</mat-option>\n            <mat-option value=\"4\">4 stars</mat-option>\n            <mat-option value=\"5\">5 stars</mat-option>          \n        </mat-select>\n        <mat-error *ngIf=\"reviewForm.get('rating').invalid && reviewForm.get('rating').touched\">\n        Select a rating!\n    </mat-error>\n    </mat-form-field>\n\n    <mat-form-field appearance=\"outline\">\n        <mat-label>Description</mat-label>\n        <textarea matInput formControlName=\"description\" placeholder=\"Description\" rows=\"5\"></textarea>\n        <mat-error *ngIf=\"reviewForm.get('description').invalid && reviewForm.get('description').touched\">\n        This input is required!</mat-error>\n    </mat-form-field>\n\n    <button mat-raised-button color=\"primary\" type=\"submit\" (click)=\"submitForm()\">\n        Submit    \n    </button>\n\n</form>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}